<ResourceDictionary
    x:Class="NINA.Plugins.PlateSolvePlus.Options"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <DataTemplate x:Key="PlateSolvePlus_Options">

        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel Orientation="Vertical" Margin="10" Width="520">

                <TextBlock Text="PlateSolvePlus – Guide Scope Plate Solving"
                           FontSize="16"
                           FontWeight="SemiBold"
                           Margin="0,0,0,12"/>

                <!-- Guider Capture -->
                <GroupBox Header="Guider Capture" Margin="0,0,0,10">
                    <Grid Margin="10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="220"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <TextBlock Text="Exposure (sec)" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center"/>
                        <TextBox Text="{Binding Settings.GuideExposureSeconds, UpdateSourceTrigger=PropertyChanged}"
                                 Grid.Row="0" Grid.Column="1"/>

                        <TextBlock Text="Gain (-1 = Auto)" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center"/>
                        <TextBox Text="{Binding Settings.GuideGain, UpdateSourceTrigger=PropertyChanged}"
                                 Grid.Row="1" Grid.Column="1"/>

                        <TextBlock Text="Binning" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center"/>
                        <TextBox Text="{Binding Settings.GuideBinning, UpdateSourceTrigger=PropertyChanged}"
                                 Grid.Row="2" Grid.Column="1"/>
                    </Grid>
                </GroupBox>

                <!-- Optics -->
                <GroupBox Header="Optics / Image Scale" Margin="0,0,0,10">
                    <Grid Margin="10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="220"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <TextBlock Text="Focal Length (mm)" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center"/>
                        <TextBox Text="{Binding Settings.GuideFocalLengthMm, UpdateSourceTrigger=PropertyChanged}"
                                 Grid.Row="0" Grid.Column="1"/>

                        <TextBlock Text="Use Camera Pixel Size" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center"/>
                        <CheckBox IsChecked="{Binding Settings.UseCameraPixelSize}" Grid.Row="1" Grid.Column="1"/>

                        <TextBlock Text="Pixel Size (µm)" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center"/>
                        <TextBox Text="{Binding Settings.GuidePixelSizeUm, UpdateSourceTrigger=PropertyChanged}"
                                 Grid.Row="2" Grid.Column="1"/>
                    </Grid>
                </GroupBox>

                <!-- Solver -->
                <GroupBox Header="Plate Solver" Margin="0,0,0,10">
                    <Grid Margin="10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="220"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <TextBlock Text="Search Radius (deg)" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center"/>
                        <TextBox Text="{Binding Settings.SolverSearchRadiusDeg, UpdateSourceTrigger=PropertyChanged}"
                                 Grid.Row="0" Grid.Column="1"/>

                        <TextBlock Text="Downsample" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center"/>
                        <TextBox Text="{Binding Settings.SolverDownsample, UpdateSourceTrigger=PropertyChanged}"
                                 Grid.Row="1" Grid.Column="1"/>

                        <TextBlock Text="Timeout (sec)" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center"/>
                        <TextBox Text="{Binding Settings.SolverTimeoutSec, UpdateSourceTrigger=PropertyChanged}"
                                 Grid.Row="2" Grid.Column="1"/>

                        <TextBlock Text="Centering Threshold (arcmin)" Grid.Row="3" Grid.Column="0" VerticalAlignment="Center"/>
                        <TextBox Text="{Binding Settings.CenteringThresholdArcmin, UpdateSourceTrigger=PropertyChanged}"
                                 Grid.Row="3" Grid.Column="1"/>

                        <TextBlock Text="Max Centering Attempts" Grid.Row="4" Grid.Column="0" VerticalAlignment="Center"/>
                        <TextBox Text="{Binding Settings.CenteringMaxAttempts, UpdateSourceTrigger=PropertyChanged}"
                                 Grid.Row="4" Grid.Column="1"/>
                    </Grid>
                </GroupBox>

<!-- Offset -->
<GroupBox Header="Offset" Margin="0,0,0,10">
    <StackPanel Margin="10">

        <CheckBox Content="Offset verwenden"
                  IsChecked="{Binding Settings.OffsetEnabled}"
                  Margin="0,0,0,8"/>

        <TextBlock Text="Mode" FontWeight="SemiBold" Margin="0,0,0,4"/>

        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
            <RadioButton Content="Rotation (Quaternion)"
                         GroupName="OffsetMode"
                         IsChecked="{Binding IsRotationMode}"
                         Margin="0,0,18,0"/>
            <RadioButton Content="Arcsec (ΔRA/ΔDec)"
                         GroupName="OffsetMode"
                         IsChecked="{Binding IsArcsecMode}"/>
        </StackPanel>

        <Button Content="Delete Offset"
                Command="{Binding ResetOffsetCommand}"
                Width="140"/>
    </StackPanel>
</GroupBox>

<!-- Quaternion -->
<GroupBox Header="Rotation Offset (Quaternion)" Margin="0,0,0,10">
    <GroupBox.Style>
        <Style TargetType="GroupBox">
            <Setter Property="Visibility" Value="Visible"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsRotationMode}" Value="False">
                    <Setter Property="Visibility" Value="Collapsed"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </GroupBox.Style>

    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="120"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Text="Qw" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center"/>
        <TextBox Text="{Binding Settings.RotationQw, UpdateSourceTrigger=PropertyChanged}" Grid.Row="0" Grid.Column="1"/>

        <TextBlock Text="Qx" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center"/>
        <TextBox Text="{Binding Settings.RotationQx, UpdateSourceTrigger=PropertyChanged}" Grid.Row="1" Grid.Column="1"/>

        <TextBlock Text="Qy" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center"/>
        <TextBox Text="{Binding Settings.RotationQy, UpdateSourceTrigger=PropertyChanged}" Grid.Row="2" Grid.Column="1"/>

        <TextBlock Text="Qz" Grid.Row="3" Grid.Column="0" VerticalAlignment="Center"/>
        <TextBox Text="{Binding Settings.RotationQz, UpdateSourceTrigger=PropertyChanged}" Grid.Row="3" Grid.Column="1"/>
    </Grid>
</GroupBox>

<!-- Arcsec -->
<GroupBox Header="Arcsec Offset" Margin="0,0,0,10">
    <GroupBox.Style>
        <Style TargetType="GroupBox">
            <Setter Property="Visibility" Value="Collapsed"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsArcsecMode}" Value="True">
                    <Setter Property="Visibility" Value="Visible"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </GroupBox.Style>

    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="220"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Text="ΔRA (arcsec)" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center"/>
        <TextBox Text="{Binding Settings.OffsetRaArcsec, UpdateSourceTrigger=PropertyChanged}"
                 Grid.Row="0" Grid.Column="1"/>

        <TextBlock Text="ΔDec (arcsec)" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center"/>
        <TextBox Text="{Binding Settings.OffsetDecArcsec, UpdateSourceTrigger=PropertyChanged}"
                 Grid.Row="1" Grid.Column="1"/>
    </Grid>
</GroupBox>

            </StackPanel>
        </ScrollViewer>

    </DataTemplate>
</ResourceDictionary>
